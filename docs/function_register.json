{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.2.0",
  "lastUpdated": "2026-01-05",
  "description": "Machine-readable registry of all backend functions, service methods, and business logic for the RFS Station Manager\n\nMulti-Station Support: Database methods now accept optional stationId parameter for filtering. All methods filter by stationId when provided, default to 'default-station' otherwise.",
  "services": {
    "database": {
      "file": "backend/src/services/database.ts",
      "description": "In-memory database service implementation",
      "type": "class",
      "methods": {
        "getAllMembers": {
          "signature": "getAllMembers(stationId?: string): Member[]",
          "line": 184,
          "description": "Get all members sorted by activity level (check-ins in last 6 months), filtered by stationId if provided",
          "parameters": [
            {
              "name": "stationId",
              "type": "string | undefined",
              "description": "Optional station ID for filtering members by station",
              "optional": true
            }
          ],
          "returns": "Member[]",
          "complexity": "O(n log n)",
          "sideEffects": "none"
        },
        "getMemberById": {
          "signature": "getMemberById(id: string): Member | undefined",
          "line": 211,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Member UUID"
            }
          ],
          "returns": "Member | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "getMemberByQRCode": {
          "signature": "getMemberByQRCode(qrCode: string): Member | undefined",
          "line": 215,
          "parameters": [
            {
              "name": "qrCode",
              "type": "string",
              "description": "Unique QR identifier"
            }
          ],
          "returns": "Member | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "createMember": {
          "signature": "createMember(name: string, details?: { rank?: string | null; firstName?: string; lastName?: string; preferredName?: string; memberNumber?: string; stationId?: string }): Member",
          "line": 219,
          "parameters": [
            {
              "name": "name",
              "type": "string",
              "description": "Member full name"
            },
            {
              "name": "details",
              "type": "object",
              "description": "Optional member details including stationId",
              "optional": true,
              "properties": {
                "rank": "string | null",
                "firstName": "string",
                "lastName": "string",
                "preferredName": "string",
                "memberNumber": "string",
                "stationId": "string - Station ID to assign"
              }
            }
          ],
          "returns": "Member",
          "complexity": "O(1)",
          "sideEffects": "Adds member to database, generates UUID and QR code, assigns stationId"
        },
        "updateMember": {
          "signature": "updateMember(id: string, name: string, rank: string | null): Member | undefined",
          "line": 230,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Member UUID"
            },
            {
              "name": "name",
              "type": "string",
              "description": "New name"
            },
            {
              "name": "rank",
              "type": "string | null",
              "description": "New rank or null"
            }
          ],
          "returns": "Member | undefined",
          "complexity": "O(n)",
          "sideEffects": "Updates member in database"
        },
        "getCheckInsByMember": {
          "signature": "getCheckInsByMember(memberId: string): CheckIn[]",
          "line": 243,
          "parameters": [
            {
              "name": "memberId",
              "type": "string",
              "description": "Member UUID"
            }
          ],
          "returns": "CheckIn[]",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "getAllStations": {
          "signature": "getAllStations(): Station[]",
          "line": 923,
          "description": "Get all stations",
          "returns": "Station[]",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "getStationById": {
          "signature": "getStationById(id: string): Station | undefined",
          "line": 928,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Station UUID"
            }
          ],
          "returns": "Station | undefined",
          "complexity": "O(1)",
          "sideEffects": "none"
        },
        "getStationsByBrigade": {
          "signature": "getStationsByBrigade(brigadeId: string): Station[]",
          "line": 933,
          "parameters": [
            {
              "name": "brigadeId",
              "type": "string",
              "description": "Brigade ID"
            }
          ],
          "returns": "Station[]",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "createStation": {
          "signature": "createStation(station: Omit<Station, 'id' | 'createdAt' | 'updatedAt'>): Station",
          "line": 938,
          "parameters": [
            {
              "name": "station",
              "type": "Omit<Station, 'id' | 'createdAt' | 'updatedAt'>",
              "description": "Station data without ID and timestamps"
            }
          ],
          "returns": "Station",
          "complexity": "O(1)",
          "sideEffects": "Adds station to database, generates UUID and timestamps"
        },
        "updateStation": {
          "signature": "updateStation(id: string, updates: Partial<Omit<Station, 'id' | 'createdAt' | 'updatedAt'>>): Station | null",
          "line": 952,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Station UUID"
            },
            {
              "name": "updates",
              "type": "Partial<Omit<Station, 'id' | 'createdAt' | 'updatedAt'>>",
              "description": "Partial station updates"
            }
          ],
          "returns": "Station | null",
          "complexity": "O(1)",
          "sideEffects": "Updates station in database"
        },
        "deleteStation": {
          "signature": "deleteStation(id: string): boolean",
          "line": 979,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Station UUID"
            }
          ],
          "returns": "boolean",
          "complexity": "O(1)",
          "sideEffects": "Soft deletes station (sets isActive=false)"
        },
        "getAllActivities": {
          "signature": "getAllActivities(): Activity[]",
          "line": 247,
          "description": "Get all activities sorted (default first, then custom alphabetically)",
          "returns": "Activity[]",
          "complexity": "O(n log n)",
          "sideEffects": "none"
        },
        "getActivityById": {
          "signature": "getActivityById(id: string): Activity | undefined",
          "line": 257,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Activity UUID"
            }
          ],
          "returns": "Activity | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "createActivity": {
          "signature": "createActivity(name: string, createdBy?: string): Activity",
          "line": 261,
          "parameters": [
            {
              "name": "name",
              "type": "string",
              "description": "Activity name"
            },
            {
              "name": "createdBy",
              "type": "string | undefined",
              "description": "Member ID who created"
            }
          ],
          "returns": "Activity",
          "complexity": "O(1)",
          "sideEffects": "Adds custom activity to database"
        },
        "getActiveActivity": {
          "signature": "getActiveActivity(): ActiveActivity | null",
          "line": 270,
          "description": "Get current active activity with full activity details",
          "returns": "ActiveActivity | null",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "setActiveActivity": {
          "signature": "setActiveActivity(activityId: string, setBy?: string): ActiveActivity",
          "line": 282,
          "parameters": [
            {
              "name": "activityId",
              "type": "string",
              "description": "Activity UUID"
            },
            {
              "name": "setBy",
              "type": "string | undefined",
              "description": "Member ID who set it"
            }
          ],
          "returns": "ActiveActivity",
          "complexity": "O(n)",
          "sideEffects": "Replaces current active activity"
        },
        "getActiveCheckIns": {
          "signature": "getActiveCheckIns(): CheckInWithDetails[]",
          "line": 291,
          "description": "Get all active check-ins with member and activity details",
          "returns": "CheckInWithDetails[]",
          "complexity": "O(n\u00b2)",
          "sideEffects": "none"
        },
        "getCheckInByMember": {
          "signature": "getCheckInByMember(memberId: string): CheckIn | undefined",
          "line": 307,
          "parameters": [
            {
              "name": "memberId",
              "type": "string",
              "description": "Member UUID"
            }
          ],
          "returns": "CheckIn | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "createCheckIn": {
          "signature": "createCheckIn(memberId: string, activityId: string, method: string, location?: string, isOffsite: boolean = false): CheckIn",
          "line": 314,
          "parameters": [
            {
              "name": "memberId",
              "type": "string"
            },
            {
              "name": "activityId",
              "type": "string"
            },
            {
              "name": "method",
              "type": "string",
              "enum": [
                "kiosk",
                "mobile",
                "qr"
              ]
            },
            {
              "name": "location",
              "type": "string | undefined"
            },
            {
              "name": "isOffsite",
              "type": "boolean",
              "default": false
            }
          ],
          "returns": "CheckIn",
          "complexity": "O(1)",
          "sideEffects": "Creates new check-in record"
        },
        "deactivateCheckIn": {
          "signature": "deactivateCheckIn(checkInId: string): CheckIn | undefined",
          "line": 331,
          "parameters": [
            {
              "name": "checkInId",
              "type": "string",
              "description": "Check-in UUID"
            }
          ],
          "returns": "CheckIn | undefined",
          "complexity": "O(n)",
          "sideEffects": "Marks check-in as inactive"
        },
        "deactivateCheckInByMember": {
          "signature": "deactivateCheckInByMember(memberId: string): boolean",
          "line": 341,
          "parameters": [
            {
              "name": "memberId",
              "type": "string",
              "description": "Member UUID"
            }
          ],
          "returns": "boolean",
          "complexity": "O(n)",
          "sideEffects": "Deactivates active check-in if found"
        },
        "getAllEvents": {
          "signature": "getAllEvents(): Event[]",
          "line": 350,
          "description": "Get all events sorted by start time (descending)",
          "returns": "Event[]",
          "complexity": "O(n log n)",
          "sideEffects": "none"
        },
        "getActiveEvents": {
          "signature": "getActiveEvents(): Event[]",
          "line": 354,
          "returns": "Event[]",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "getEventById": {
          "signature": "getEventById(id: string): Event | undefined",
          "line": 358,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Event UUID"
            }
          ],
          "returns": "Event | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "getEventWithParticipants": {
          "signature": "getEventWithParticipants(id: string): EventWithParticipants | undefined",
          "line": 362,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Event UUID"
            }
          ],
          "returns": "EventWithParticipants | undefined",
          "complexity": "O(n)",
          "sideEffects": "none"
        },
        "createEvent": {
          "signature": "createEvent(name: string, type: string, location?: string, description?: string): Event",
          "line": 375,
          "parameters": [
            {
              "name": "name",
              "type": "string"
            },
            {
              "name": "type",
              "type": "string",
              "enum": [
                "incident",
                "training",
                "meeting",
                "maintenance",
                "other"
              ]
            },
            {
              "name": "location",
              "type": "string | undefined"
            },
            {
              "name": "description",
              "type": "string | undefined"
            }
          ],
          "returns": "Event",
          "complexity": "O(1)",
          "sideEffects": "Creates new event"
        },
        "endEvent": {
          "signature": "endEvent(id: string): Event | undefined",
          "line": 473,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Event UUID"
            }
          ],
          "returns": "Event | undefined",
          "complexity": "O(1)",
          "sideEffects": "Sets event as inactive with end time. Event remains visible in UI."
        },
        "reactivateEvent": {
          "signature": "reactivateEvent(id: string): Event | undefined",
          "line": 486,
          "parameters": [
            {
              "name": "id",
              "type": "string",
              "description": "Event UUID"
            }
          ],
          "returns": "Event | undefined",
          "complexity": "O(1)",
          "sideEffects": "Clears event end time and sets isActive=true",
          "notes": "Used to reactivate manually ended or auto-expired events"
        },
        "addParticipant": {
          "signature": "addParticipant(eventId: string, memberId: string, role?: string): EventParticipant",
          "line": 401,
          "parameters": [
            {
              "name": "eventId",
              "type": "string"
            },
            {
              "name": "memberId",
              "type": "string"
            },
            {
              "name": "role",
              "type": "string | undefined"
            }
          ],
          "returns": "EventParticipant",
          "complexity": "O(1)",
          "sideEffects": "Adds participant to event"
        },
        "removeParticipant": {
          "signature": "removeParticipant(eventId: string, participantId: string): EventParticipant | undefined",
          "line": 418,
          "parameters": [
            {
              "name": "eventId",
              "type": "string"
            },
            {
              "name": "participantId",
              "type": "string"
            }
          ],
          "returns": "EventParticipant | undefined",
          "complexity": "O(n)",
          "sideEffects": "Marks participant as inactive with checkout time"
        },
        "getEventParticipants": {
          "signature": "getEventParticipants(eventId: string): EventParticipant[]",
          "line": 432,
          "parameters": [
            {
              "name": "eventId",
              "type": "string"
            }
          ],
          "returns": "EventParticipant[]",
          "complexity": "O(n)",
          "sideEffects": "none"
        }
      }
    },
    "achievementService": {
      "file": "backend/src/services/achievementService.ts",
      "description": "Business logic for calculating and tracking member achievements",
      "functions": {
        "calculateAchievements": {
          "signature": "calculateAchievements(memberId: string, db: DatabaseService): Achievement[]",
          "description": "Calculate all achievements for a member based on their activity",
          "parameters": [
            {
              "name": "memberId",
              "type": "string",
              "description": "Member UUID"
            },
            {
              "name": "db",
              "type": "DatabaseService",
              "description": "Database service instance"
            }
          ],
          "returns": "Achievement[]",
          "logic": [
            "Fetches member check-in history",
            "Calculates sign-in milestones (1, 10, 50, 100)",
            "Calculates event participation (1, 10, 50)",
            "Calculates truck check participation (5, 20, 50)",
            "Returns array with unlock status and progress"
          ],
          "achievements": [
            {
              "id": "first-signin",
              "name": "First Sign-In",
              "requirement": 1,
              "category": "sign-ins"
            },
            {
              "id": "regular-attendee",
              "name": "Regular Attendee",
              "requirement": 10,
              "category": "sign-ins"
            },
            {
              "id": "dedicated-member",
              "name": "Dedicated Member",
              "requirement": 50,
              "category": "sign-ins"
            },
            {
              "id": "veteran",
              "name": "Veteran",
              "requirement": 100,
              "category": "sign-ins"
            },
            {
              "id": "first-event",
              "name": "First Event",
              "requirement": 1,
              "category": "events"
            },
            {
              "id": "event-regular",
              "name": "Event Regular",
              "requirement": 10,
              "category": "events"
            },
            {
              "id": "event-veteran",
              "name": "Event Veteran",
              "requirement": 50,
              "category": "events"
            },
            {
              "id": "team-player",
              "name": "Team Player",
              "requirement": 5,
              "category": "truck-checks"
            },
            {
              "id": "safety-champion",
              "name": "Safety Champion",
              "requirement": 20,
              "category": "truck-checks"
            },
            {
              "id": "equipment-expert",
              "name": "Equipment Expert",
              "requirement": 50,
              "category": "truck-checks"
            }
          ]
        }
      }
    },
    "azureStorage": {
      "file": "backend/src/services/azureStorage.ts",
      "description": "Azure Blob Storage service for file uploads",
      "functions": {
        "uploadPhoto": {
          "signature": "uploadPhoto(file: Buffer, filename: string): Promise<string>",
          "description": "Upload photo to Azure Blob Storage",
          "parameters": [
            {
              "name": "file",
              "type": "Buffer",
              "description": "File buffer"
            },
            {
              "name": "filename",
              "type": "string",
              "description": "Target filename"
            }
          ],
          "returns": "Promise<string>",
          "returnDescription": "Public URL of uploaded file",
          "throws": [
            "Azure Storage errors"
          ],
          "async": true
        },
        "deletePhoto": {
          "signature": "deletePhoto(url: string): Promise<void>",
          "description": "Delete photo from Azure Blob Storage",
          "parameters": [
            {
              "name": "url",
              "type": "string",
              "description": "Blob URL"
            }
          ],
          "returns": "Promise<void>",
          "throws": [
            "Azure Storage errors"
          ],
          "async": true
        }
      }
    },
    "dbFactory": {
      "file": "backend/src/services/dbFactory.ts",
      "description": "Database factory for creating appropriate database instance",
      "functions": {
        "ensureDatabase": {
          "signature": "ensureDatabase(): Promise<DatabaseService>",
          "description": "Get database instance (singleton pattern)",
          "returns": "Promise<DatabaseService>",
          "logic": "Returns Table Storage for production (if configured), in-memory DB for development",
          "async": true
        },
        "initializeDatabase": {
          "signature": "initializeDatabase(): Promise<DatabaseService>",
          "description": "Initialize database connection",
          "returns": "Promise<DatabaseService>",
          "logic": "Checks USE_TABLE_STORAGE and AZURE_STORAGE_CONNECTION_STRING to determine DB type",
          "async": true
        }
      }
    },
    "truckChecksDatabase": {
      "file": "backend/src/services/truckChecksDatabase.ts",
      "description": "In-memory truck checks database service",
      "type": "class",
      "collections": [
        "appliances",
        "templates",
        "check_runs",
        "check_results"
      ],
      "methodCategories": {
        "appliances": [
          "getAllAppliances",
          "getApplianceById",
          "createAppliance",
          "updateAppliance",
          "deactivateAppliance"
        ],
        "templates": [
          "getAllTemplates",
          "getTemplateById",
          "getTemplateWithItems",
          "createTemplate",
          "updateTemplate",
          "deleteTemplate"
        ],
        "checkRuns": [
          "getAllCheckRuns",
          "getCheckRunById",
          "getCheckRunWithResults",
          "createCheckRun",
          "completeCheckRun"
        ],
        "checkResults": [
          "createCheckResult",
          "updateCheckResult",
          "getCheckResultsByRun"
        ]
      }
    },
    "tableStorageDatabase": {
      "file": "backend/src/services/tableStorageDatabase.ts",
      "description": "Azure Table Storage implementation (production database)",
      "type": "class",
      "note": "All methods are async and use @azure/data-tables SDK"
    },
    "tableStorageTruckChecksDatabase": {
      "file": "backend/src/services/tableStorageTruckChecksDatabase.ts",
      "description": "Azure Table Storage implementation for truck checks",
      "type": "class",
      "note": "All methods are async and use @azure/data-tables SDK"
    },
    "truckChecksDbFactory": {
      "file": "backend/src/services/truckChecksDbFactory.ts",
      "description": "Factory for truck checks database instances",
      "functions": {
        "ensureTruckChecksDatabase": {
          "signature": "ensureTruckChecksDatabase(): Promise<TruckChecksDatabase>",
          "description": "Get truck checks database instance (singleton)",
          "returns": "Promise<TruckChecksDatabase>",
          "async": true
        }
      }
    },
    "dbFactoryHelper": {
      "file": "backend/src/services/dbFactoryHelper.ts",
      "description": "Shared database initialization logic for factories",
      "type": "module",
      "methods": {
        "initializeDatabase": {
          "signature": "initializeDatabase<TDatabase>(config: DatabaseInitConfig<TDatabase>): Promise<TDatabase>",
          "line": 31,
          "description": "Initialize a database with common logic for Table Storage vs In-Memory fallback",
          "parameters": [
            {
              "name": "config",
              "type": "DatabaseInitConfig<TDatabase>",
              "description": "Database initialization configuration"
            }
          ],
          "returns": "Promise<TDatabase>",
          "complexity": "O(1)",
          "sideEffects": "Connects to database, logs initialization status"
        }
      }
    },
    "errorHandler": {
      "file": "backend/src/services/errorHandler.ts",
      "description": "Standardized error handling utilities for consistent API responses",
      "type": "module",
      "methods": {
        "sendErrorResponse": {
          "signature": "sendErrorResponse(res: Response, statusCode: number, message: string, error?: unknown, includeDetails?: boolean): void",
          "line": 28,
          "description": "Send a standardized error response with logging",
          "parameters": [
            {
              "name": "res",
              "type": "Response",
              "description": "Express response object"
            },
            {
              "name": "statusCode",
              "type": "number",
              "description": "HTTP status code"
            },
            {
              "name": "message",
              "type": "string",
              "description": "User-friendly error message"
            },
            {
              "name": "error",
              "type": "unknown",
              "description": "Optional error object for logging"
            },
            {
              "name": "includeDetails",
              "type": "boolean",
              "description": "Whether to include error details in response"
            }
          ],
          "returns": "void",
          "sideEffects": "Logs error to console, sends HTTP response"
        },
        "asyncHandler": {
          "signature": "asyncHandler<T>(handler: (req: unknown, res: Response) => Promise<T>): (req: unknown, res: Response) => Promise<void>",
          "line": 99,
          "description": "Async error handler wrapper for route handlers",
          "returns": "Function",
          "complexity": "O(1)",
          "sideEffects": "Catches errors and sends standardized error responses"
        }
      }
    },
    "rolloverService": {
      "file": "backend/src/services/rolloverService.ts",
      "description": "Event auto-expiry and rollover service for time-based event deactivation",
      "type": "module",
      "constants": {
        "EVENT_EXPIRY_HOURS": {
          "type": "number",
          "default": 12,
          "description": "Hours after event start time before auto-expiry",
          "source": "process.env.EVENT_EXPIRY_HOURS"
        }
      },
      "methods": {
        "isEventExpired": {
          "signature": "isEventExpired(event: Event, expiryHours?: number): boolean",
          "line": 30,
          "description": "Check if an event has exceeded the expiry time limit",
          "parameters": [
            {
              "name": "event",
              "type": "Event",
              "description": "Event to check for expiry"
            },
            {
              "name": "expiryHours",
              "type": "number",
              "description": "Optional custom expiry hours (defaults to EVENT_EXPIRY_HOURS)"
            }
          ],
          "returns": "boolean",
          "complexity": "O(1)",
          "sideEffects": "none"
        },
        "autoExpireEvents": {
          "signature": "autoExpireEvents(events: Event[], db: IDatabase): Promise<string[]>",
          "line": 45,
          "description": "Mark expired events as inactive (events remain visible in UI)",
          "parameters": [
            {
              "name": "events",
              "type": "Event[]",
              "description": "Array of events to check"
            },
            {
              "name": "db",
              "type": "IDatabase",
              "description": "Database instance for updating events"
            }
          ],
          "returns": "Promise<string[]>",
          "complexity": "O(n)",
          "sideEffects": "Marks expired events as inactive via db.endEvent()"
        },
        "deactivateExpiredEvents": {
          "signature": "deactivateExpiredEvents(db: IDatabase): Promise<string[]>",
          "line": 71,
          "description": "Deactivate all expired events (manual rollover trigger)",
          "parameters": [
            {
              "name": "db",
              "type": "IDatabase",
              "description": "Database instance"
            }
          ],
          "returns": "Promise<string[]>",
          "complexity": "O(n)",
          "sideEffects": "Queries database and marks expired events as inactive"
        }
      }
    }
  },
  "routes": {
    "members": {
      "file": "backend/src/routes/members.ts",
      "description": "Express routes for member management",
      "endpoints": 6,
      "handlers": [
        {
          "method": "GET",
          "path": "/",
          "handler": "getAllMembers",
          "line": 18
        },
        {
          "method": "GET",
          "path": "/:id",
          "handler": "getMemberById",
          "line": 30
        },
        {
          "method": "GET",
          "path": "/qr/:qrCode",
          "handler": "getMemberByQRCode",
          "line": 45
        },
        {
          "method": "POST",
          "path": "/",
          "handler": "createMember",
          "line": 60
        },
        {
          "method": "PUT",
          "path": "/:id",
          "handler": "updateMember",
          "line": 76
        },
        {
          "method": "GET",
          "path": "/:id/history",
          "handler": "getMemberHistory",
          "line": 95
        }
      ],
      "socketEvents": [
        "member-added",
        "member-updated"
      ]
    },
    "activities": {
      "file": "backend/src/routes/activities.ts",
      "description": "Express routes for activity management",
      "endpoints": 4,
      "handlers": [
        {
          "method": "GET",
          "path": "/",
          "handler": "getAllActivities",
          "line": 18
        },
        {
          "method": "POST",
          "path": "/",
          "handler": "createActivity",
          "line": 30
        },
        {
          "method": "GET",
          "path": "/active",
          "handler": "getActiveActivity",
          "line": 48
        },
        {
          "method": "POST",
          "path": "/active",
          "handler": "setActiveActivity",
          "line": 68
        }
      ],
      "socketEvents": [
        "activity-change"
      ]
    },
    "checkins": {
      "file": "backend/src/routes/checkins.ts",
      "description": "Express routes for check-in management",
      "endpoints": 4,
      "handlers": [
        {
          "method": "GET",
          "path": "/active",
          "handler": "getActiveCheckIns",
          "line": 18
        },
        {
          "method": "POST",
          "path": "/",
          "handler": "toggleCheckIn",
          "line": 30
        },
        {
          "method": "DELETE",
          "path": "/:memberId",
          "handler": "undoCheckIn",
          "line": 93
        },
        {
          "method": "POST",
          "path": "/url-checkin",
          "handler": "urlBasedCheckIn",
          "line": 111
        }
      ],
      "socketEvents": [
        "checkin",
        "checkout"
      ]
    },
    "events": {
      "file": "backend/src/routes/events.ts",
      "description": "Express routes for event management",
      "endpoints": 7,
      "handlers": [
        {
          "method": "GET",
          "path": "/",
          "handler": "getAllEvents",
          "line": 18
        },
        {
          "method": "GET",
          "path": "/active",
          "handler": "getActiveEvents",
          "line": 30
        },
        {
          "method": "GET",
          "path": "/:id",
          "handler": "getEventById",
          "line": 42
        },
        {
          "method": "POST",
          "path": "/",
          "handler": "createEvent",
          "line": 58
        },
        {
          "method": "PUT",
          "path": "/:id/end",
          "handler": "endEvent",
          "line": 81
        },
        {
          "method": "POST",
          "path": "/:id/participants",
          "handler": "addParticipant",
          "line": 99
        },
        {
          "method": "DELETE",
          "path": "/:id/participants/:participantId",
          "handler": "removeParticipant",
          "line": 125
        }
      ],
      "socketEvents": [
        "event-created",
        "event-ended",
        "participant-added",
        "participant-removed"
      ]
    },
    "truckChecks": {
      "file": "backend/src/routes/truckChecks.ts",
      "description": "Express routes for truck check management",
      "endpointCategories": {
        "appliances": 5,
        "templates": 5,
        "checkRuns": 4,
        "checkResults": 2
      },
      "totalEndpoints": 16
    },
    "achievements": {
      "file": "backend/src/routes/achievements.ts",
      "description": "Express routes for achievement tracking",
      "endpoints": 2,
      "handlers": [
        {
          "method": "GET",
          "path": "/member/:memberId",
          "handler": "getMemberAchievements"
        },
        {
          "method": "GET",
          "path": "/recent",
          "handler": "getRecentAchievements"
        }
      ],
      "socketEvents": [
        "achievement-unlocked"
      ]
    }
  },
  "utilities": {
    "uuid": {
      "package": "uuid",
      "function": "v4()",
      "usage": "Generate unique identifiers for all entities",
      "usedIn": [
        "All create operations",
        "QR code generation"
      ]
    },
    "dateTime": {
      "type": "JavaScript Date",
      "format": "ISO 8601",
      "usage": "Timestamp creation and manipulation"
    },
    "stringUtils": {
      "functions": [
        {
          "name": "String.prototype.trim()",
          "usage": "Input sanitization"
        },
        {
          "name": "String.prototype.localeCompare()",
          "usage": "Alphabetical sorting"
        }
      ]
    }
  },
  "typeDefinitions": {
    "file": "backend/src/types/index.ts",
    "interfaces": [
      "Member",
      "Activity",
      "CheckIn",
      "CheckInWithDetails",
      "ActiveActivity",
      "Event",
      "EventParticipant",
      "EventWithParticipants",
      "DatabaseService",
      "Appliance",
      "ChecklistTemplate",
      "ChecklistItem",
      "CheckRun",
      "CheckResult",
      "TruckChecksDatabase"
    ]
  },
  "testCoverage": {
    "framework": "Jest + Supertest",
    "totalTests": 45,
    "suites": {
      "members": {
        "file": "backend/src/__tests__/members.test.ts",
        "tests": 16
      },
      "activities": {
        "file": "backend/src/__tests__/activities.test.ts",
        "tests": 16
      },
      "checkins": {
        "file": "backend/src/__tests__/checkins.test.ts",
        "tests": 13
      }
    },
    "coverageTarget": {
      "branches": 70,
      "functions": 70,
      "lines": 70,
      "statements": 70
    }
  },
  "maintenance": {
    "updateTriggers": [
      "When adding new service methods or functions",
      "When modifying function signatures or parameters",
      "When adding new database methods",
      "When creating new utility functions",
      "When refactoring business logic",
      "When adding new routes or handlers"
    ],
    "validation": {
      "schema": "Validate against JSON Schema Draft 7",
      "tools": [
        "jsonlint",
        "ajv-cli"
      ],
      "ci": "Run validation in CI/CD pipeline"
    },
    "references": {
      "from": [
        "docs/FUNCTION_REGISTER.md",
        "docs/AS_BUILT.md",
        "docs/MASTER_PLAN.md",
        ".github/copilot-instructions.md"
      ]
    }
  }
}